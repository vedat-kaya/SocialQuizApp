{% extends "layout.html" %}

{% block title %}{{ user.username }} Profili | SorSana{% endblock %}

{% block body %}

<div class="container mt-4">
    
    <div class="row justify-content-center mb-5">
        <div class="col-md-8">
            <div class="card bg-dark text-white shadow-lg" style="border: 1px solid rgba(255,255,255,0.1); border-radius: 20px;">
                <div class="card-body text-center p-5">
                    <img src="{{ url_for('static', filename='uploads/profile_pics/' + user.profile_pic_url) }}" 
                         style="width: 120px; height: 120px; border-radius: 50%; border: 4px solid var(--primary-color); object-fit: cover;">
                    
                    <h2 class="mt-3 font-weight-bold">{{ user.username }}</h2>
                    <p class="text-white-50">{{ user.name }}</p>
                    
                    <div class="d-flex justify-content-center mt-4">
                        <div class="px-4 border-right border-secondary">
                            <h4 class="mb-0 text-primary">{{ quizzes|length }}</h4>
                            <small class="text-muted">Quiz</small>
                        </div>
                        <div class="px-4 border-right border-secondary">
                            <h4 class="mb-0 text-success">{{ user.total_views }}</h4>
                            <small class="text-muted">İzlenme</small>
                        </div>
                        <div class="px-4">
                            <h4 class="mb-0 text-danger">{{ user.total_likes }}</h4>
                            <small class="text-muted">Beğeni</small>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <h4 class="text-white mb-4 border-bottom pb-2" style="border-color: rgba(255,255,255,0.1) !important;">
        <i class="fa-solid fa-layer-group"></i> Paylaşılan Quizler
    </h4>

    <div class="row">
        {% if quizzes %}
            {% for quiz in quizzes %}
            <div class="col-sm-6 col-md-4 col-lg-3 mb-4">
                <div class="card h-100 border-0 shadow-sm" style="border-radius: 15px; overflow: hidden; transition: transform 0.2s;">
                    <a href="{{ url_for('quiz_detail', quiz_id=quiz.quiz_id) }}">
                        <img src="{{ url_for('static', filename='uploads/quiz_covers/' + quiz.cover_image_url) }}" 
                             class="card-img-top" style="height: 140px; object-fit: cover;">
                    </a>
                    
                    <div class="card-body">
                        <h6 class="card-title font-weight-bold mb-2">
                            <a href="{{ url_for('quiz_detail', quiz_id=quiz.quiz_id) }}" class="text-dark text-decoration-none">
                                {{ quiz.title }}
                            </a>
                        </h6>
                        <small class="text-muted d-block mb-3">{{ quiz.description | truncate(50) }}</small>
                        
                        <div class="d-flex justify-content-between align-items-center">
                            <small class="text-muted"><i class="fa-solid fa-eye"></i> {{ quiz.views }}</small>
                            
                            <a href="{{ url_for('quiz_detail', quiz_id=quiz.quiz_id) }}" class="btn btn-sm btn-outline-primary" style="border-radius: 20px;">
                                İncele
                            </a>
                        </div>
                    </div>
                </div>
            </div>
            {% endfor %}
        {% else %}
            <div class="col-12 text-center text-white opacity-50 mt-3">
                <i class="fa-solid fa-box-open fa-3x mb-3"></i>
                <p>Bu kullanıcı henüz hiç quiz paylaşmamış.</p>
            </div>
        {% endif %}
    </div>

</div>

{% endblock %}